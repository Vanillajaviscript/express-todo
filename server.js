/////////////////////
//Importing our dependencies
/////////////////////
require("dotenv").config(); // get our .env variables
const express = require("express"); //web framework
const methodOverride = require("method-override");// override request methods, post to put, or delete;
const morgan = require("morgan"); //used for logging info when a request is made
const TodoRouter = require('./controllers/TodoController');


////////////////////////////////////////////////////////////////////////////////////////////
//Create express Application
////////////////////////////////////////////////////////////////////////////////////////////
const app = express();
////////////////////////////////////////////////////////////////////////////////////////////
//Middleware - app.use(middleware function)
////////////////////////////////////////////////////////////////////////////////////////////
app.use(methodOverride("_method"));//Allows to override request methods for form submissions
app.use(morgan("dev")); //Log every request
app.use(express.urlencoded({extended: true}));//Parses html form bodies into req.body
app.use("/public", express.static("public"));//Serve files statically
app.use("/todo", TodoRouter);
////////////////////////////////////////////////////////////////////////////////////////////
//Listener
////////////////////////////////////////////////////////////////////////////////////////////
const PORT = process.env.PORT;
app.listen(PORT, () => {console.log(`Server is live on port: ${PORT}`)});